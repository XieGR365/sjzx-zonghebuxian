# å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ğŸš€ ä¸€é”®éƒ¨ç½²

### å‰ææ¡ä»¶

- LinuxæœåŠ¡å™¨ï¼ˆUbuntu 20.04+, CentOS 7+, Debian 10+ï¼‰
- Rootæƒé™æˆ–sudoæƒé™
- äº’è”ç½‘è¿æ¥
- è‡³å°‘2GBå†…å­˜å’Œ20GBç£ç›˜ç©ºé—´

### éƒ¨ç½²æ­¥éª¤

```bash
# 1. ä¸Šä¼ éƒ¨ç½²è„šæœ¬åˆ°æœåŠ¡å™¨
scp è‡ªåŠ¨éƒ¨ç½².sh user@server:/tmp/

# 2. ç™»å½•æœåŠ¡å™¨
ssh user@server

# 3. è¿›å…¥ä¸´æ—¶ç›®å½•
cd /tmp

# 4. ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x è‡ªåŠ¨éƒ¨ç½².sh

# 5. æ‰§è¡Œéƒ¨ç½²è„šæœ¬
sudo ./è‡ªåŠ¨éƒ¨ç½².sh
```

### é¢„æœŸç»“æœ

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ç³»ç»Ÿï¼š

- **å‰ç«¯åœ°å€**: http://æœåŠ¡å™¨IPåœ°å€
- **åç«¯API**: http://æœåŠ¡å™¨IPåœ°å€:3001

---

## ğŸ” ç¯å¢ƒæ£€æŸ¥

åœ¨éƒ¨ç½²å‰ï¼Œå»ºè®®å…ˆè¿è¡Œç¯å¢ƒæ£€æŸ¥è„šæœ¬ï¼š

```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x ç¯å¢ƒæ£€æŸ¥.sh

# æ‰§è¡Œç¯å¢ƒæ£€æŸ¥
sudo ./ç¯å¢ƒæ£€æŸ¥.sh
```

ç¯å¢ƒæ£€æŸ¥è„šæœ¬ä¼šæ£€æŸ¥ï¼š

- âœ… æ“ä½œç³»ç»Ÿç‰ˆæœ¬
- âœ… ç”¨æˆ·æƒé™
- âœ… ç³»ç»Ÿèµ„æºï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ï¼‰
- âœ… Dockerå’ŒDocker Compose
- âœ… ç½‘ç»œè¿æ¥
- âœ… ç«¯å£å ç”¨
- âœ… é˜²ç«å¢™é…ç½®
- âœ… SELinuxçŠ¶æ€

---

## ğŸ“Š æœåŠ¡ç®¡ç†

éƒ¨ç½²å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨æœåŠ¡ç®¡ç†è„šæœ¬ç®¡ç†æœåŠ¡ï¼š

```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x æœåŠ¡ç®¡ç†.sh

# å¯åŠ¨æœåŠ¡ç®¡ç†
sudo ./æœåŠ¡ç®¡ç†.sh
```

æœåŠ¡ç®¡ç†è„šæœ¬æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

- 1. å¯åŠ¨æœåŠ¡
- 2. åœæ­¢æœåŠ¡
- 3. é‡å¯æœåŠ¡
- 4. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
- 5. æŸ¥çœ‹æœåŠ¡æ—¥å¿—
- 6. å¤‡ä»½æ•°æ®
- 7. æ¸…ç†èµ„æº
- 8. æ›´æ–°æœåŠ¡
- 9. æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
cd /opt/sjzx-zonghebuxian
docker-compose ps
```

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
cd /opt/sjzx-zonghebuxian
docker-compose logs -f

# æŸ¥çœ‹åç«¯æ—¥å¿—
docker-compose logs -f backend

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
docker-compose logs -f frontend
```

### é‡å¯æœåŠ¡

```bash
cd /opt/sjzx-zonghebuxian
docker-compose restart
```

### åœæ­¢æœåŠ¡

```bash
cd /opt/sjzx-zonghebuxian
docker-compose down
```

### å¤‡ä»½æ•°æ®

```bash
# å¤‡ä»½æ•°æ®åº“
cp /opt/sjzx-zonghebuxian/backend/data/wiring.db /opt/sjzx-zonghebuxian/backup/wiring_$(date +%Y%m%d).db

# å¤‡ä»½ä¸Šä¼ æ–‡ä»¶
tar -czf /opt/sjzx-zonghebuxian/backup/uploads_$(date +%Y%m%d).tar.gz -C /opt/sjzx-zonghebuxian/backend/uploads .
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²è„šæœ¬æ‰§è¡Œæƒé™é”™è¯¯

```bash
bash: ./è‡ªåŠ¨éƒ¨ç½².sh: Permission denied
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
chmod +x è‡ªåŠ¨éƒ¨ç½².sh
sudo ./è‡ªåŠ¨éƒ¨ç½².sh
```

---

### Q2: ç«¯å£è¢«å ç”¨

```bash
ç«¯å£ 80 æˆ– 3001 å·²è¢«å ç”¨
```

**è§£å†³æ–¹æ¡ˆ**:

1. æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹ï¼š
```bash
sudo netstat -tulnp | grep :80
sudo netstat -tulnp | grep :3001
```

2. åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹ï¼š
```bash
sudo kill -9 <PID>
```

---

### Q3: å®¹å™¨å¯åŠ¨å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:

1. æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š
```bash
cd /opt/sjzx-zonghebuxian
docker-compose logs backend
docker-compose logs frontend
```

2. æ£€æŸ¥ç£ç›˜ç©ºé—´ï¼š
```bash
df -h
```

3. æ¸…ç†Dockerèµ„æºï¼š
```bash
docker system prune -a
```

---

### Q4: æ— æ³•è®¿é—®å‰ç«¯é¡µé¢

**è§£å†³æ–¹æ¡ˆ**:

1. æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼š
```bash
cd /opt/sjzx-zonghebuxian
docker-compose ps
```

2. æ£€æŸ¥é˜²ç«å¢™ï¼š
```bash
# Ubuntu/Debian
sudo ufw status
sudo ufw allow 80/tcp

# CentOS/RHEL
sudo firewall-cmd --list-all
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --reload
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š[README.md](./README.md)

---

**ç¥æ‚¨éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰
