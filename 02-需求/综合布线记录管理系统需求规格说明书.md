# 综合布线记录管理系统 需求规格说明书

## 版本历史

| 版本 | 日期 | 作者 | 变更内容 | 审核人 |
|------|------|------|----------|--------|
| v1.0 | 2025-12-24 | 系统自动生成 | 初始版本 | - |

## 1. 引言

### 1.1 文档目的
本文档详细描述了综合布线记录管理系统的需求，包括功能需求、非功能需求、数据需求等，为系统设计、开发和测试提供依据。文档从用户角度出发，重点关注用户体验和实际使用场景。

### 1.2 术语定义
| 术语 | 解释 |
|------|------|
| 综合布线 | 指在一个建筑群中或建筑内，采用统一的传输媒介，将所有语音、数据、视频等设备连接起来的结构化布线系统 |
| 智孚系统 | 外部业务系统，用于管理工单和任务，系统需预留接口以便后续集成 |
| OCR | 光学字符识别技术，用于将图片或PDF中的文字转换为可编辑的文本 |
| IDC | 互联网数据中心，指大型机房，用于存放服务器等IT设备 |
| 跳纤 | 指在机房内或机房之间，通过光纤跳线连接不同设备或端口的操作 |
| 专线 | 指为特定客户提供的专用通信线路，具有固定带宽和专属使用权 |

## 2. 系统概述

### 2.1 系统定位
- **部署方式**: 部署在远程跳板机上的Web应用
- **访问方式**: 通过网络访问网页进行操作
- **核心功能**: 记录和管理各个机房的综合布线信息
- **数据存储**: 所有数据存储在数据库中
- **用户管理**: 支持用户认证、权限管理和操作日志

### 2.2 系统目标
- 实现综合布线信息的数字化管理，替代传统的纸质记录
- 支持多种格式的文件上传和自动识别，提高数据录入效率
- 提供便捷的数据查询和下载功能，方便用户获取所需信息
- 预留智孚系统接口，支持后续自动化集成，减少人工操作
- 提供数据可视化功能，方便用户直观了解布线情况

### 2.3 预期用户
| 用户角色 | 职责 |
|----------|------|
| 系统管理员 | 管理用户、配置系统、查看日志 |
| 运维工程师 | 录入、查询、管理布线信息 |
| 技术经理 | 查看统计报表、审批布线变更 |
| 客户 | 查询自己的布线信息（可选） |

## 3. 功能需求

### 3.1 用户登录与认证
#### 3.1.1 登录功能
**用户故事**: 作为系统用户，我希望能够通过用户名和密码登录系统，以便访问系统功能。

**功能描述**:
- 提供登录界面，支持用户名和密码输入
- 支持"记住密码"功能，方便用户下次登录
- 支持密码找回功能，通过邮箱或手机验证
- 登录成功后跳转到系统首页
- 登录失败时显示错误提示

**用户体验考虑**:
- 登录界面简洁明了，输入框有占位符提示
- 密码输入框支持显示/隐藏密码功能
- 登录按钮有明显的视觉反馈
- 错误提示信息友好，明确说明失败原因

#### 3.1.2 登出功能
**用户故事**: 作为系统用户，我希望能够安全登出系统，保护我的账户安全。

**功能描述**:
- 提供登出按钮，位于系统右上角
- 点击登出按钮后，清除用户登录状态
- 跳转到登录界面

### 3.2 数据录入
#### 3.2.1 文件上传
**用户故事**: 作为运维工程师，我希望能够上传Excel、PDF、图片等格式的布线记录，以便快速录入数据。

**功能描述**:
- 支持上传的文件格式:
  - Excel表格（.xlsx, .xls）
  - PDF文档（.pdf）
  - 图片格式（.jpg, .png, .jpeg, .bmp）
- 支持的上传方式:
  - 单文件上传：点击上传按钮选择单个文件
  - 批量文件上传：支持选择多个文件同时上传
  - 拖拽上传：支持将文件拖拽到上传区域
- 上传进度显示：显示每个文件的上传进度
- 上传成功/失败提示：上传完成后显示结果

**用户体验考虑**:
- 上传区域有明显的拖拽提示
- 支持文件大小限制和格式校验，上传前提示用户
- 上传过程中支持取消上传
- 上传失败时显示详细的错误信息

#### 3.2.2 自动识别
**用户故事**: 作为运维工程师，我希望上传文件后系统能够自动识别并提取相关字段，减少手动录入的工作量。

**功能描述**:
- 字段自动识别：根据目标字段自动提取并记录数据
- OCR识别：支持图片和PDF的OCR文字识别
- AI辅助填写：利用AI技术辅助填写缺失字段
- 数据验证：自动验证数据的完整性和准确性
- 识别结果预览：显示自动识别的结果，方便用户核对

**用户体验考虑**:
- 识别过程中显示进度提示
- 识别结果与原始文件对应，方便对照核对
- 识别错误的字段有明显标记，方便用户修改
- 支持批量修改识别结果

#### 3.2.3 标准化表单录入
**用户故事**: 作为运维工程师，我希望能够通过标准化表单录入布线信息，确保数据的规范性和完整性。

**功能描述**:
- 表单字段包括:
  - 登记表编号（系统自动生成）
  - 机房名称（下拉选择或手动输入）
  - IDC需求编号
  - YES工单编号
  - 用户单位
  - 线路用途（下拉选择：专线/跳线/裸光纤）
  - 线缆类型规格（下拉选择：单模光纤/网线）
  - 运营商（下拉选择：联通/电信/移动/DCI/信息管线）
  - 运营商编号
  - 执行日期（日期选择器）
  - 本端设备位置
  - 对端设备位置
  - 中间跳接信息
  - 报障联系人（姓名+电话）
  - 线路状态（下拉选择：正常/故障/已拆除）
  - 登记人（系统自动填充当前用户）
  - 登记日期（系统自动填充当前日期）
  - 备注信息
- 必填字段校验：确保关键信息完整
- 字段提示：提供字段填写说明和示例
- 表单保存：支持保存草稿和提交审核

**用户体验考虑**:
- 表单布局清晰，字段分组合理
- 输入框有占位符提示，必填字段有明显标记
- 下拉选择框支持搜索功能，方便快速选择
- 日期选择器支持快速选择今天、昨天等常用日期
- 表单提交前进行数据校验，提示用户修改错误字段
- 支持表单数据的复制和粘贴

### 3.3 查询检索
#### 3.3.1 多维度查询
**用户故事**: 作为运维工程师，我希望能够通过多种条件查询布线信息，快速找到所需数据。

**功能描述**:
- 按数据中心查询：根据机房名称筛选数据
- 按客户查询：根据用户单位筛选数据
- 按电路ID查询：根据IDC需求编号或YES工单编号查询
- 按端口查询：根据本端或对端端口查询
- 模糊搜索：支持关键字模糊匹配
- 组合查询：支持多个条件组合查询
- 查询条件保存：支持保存常用查询条件，方便下次使用

**用户体验考虑**:
- 查询界面简洁明了，查询条件分类清晰
- 支持查询条件的展开和折叠，减少界面复杂度
- 查询结果实时更新，无需刷新页面
- 支持清空查询条件

#### 3.3.2 高级检索
**用户故事**: 作为运维工程师，我希望能够使用高级检索功能，更精确地查询数据。

**功能描述**:
- 日期范围查询：根据执行日期范围筛选
- 运营商筛选：根据运营商类型筛选
- 线路状态筛选：根据线路状态筛选
- 历史记录查询：查询已删除或修改的历史记录
- 数据导出：支持将查询结果导出为Excel、PDF、CSV等格式

**用户体验考虑**:
- 高级检索条件默认隐藏，用户可点击展开
- 日期范围选择器支持快捷选择（如最近7天、最近30天）
- 支持批量选择筛选条件

### 3.4 数据展示
#### 3.4.1 列表视图
**用户故事**: 作为运维工程师，我希望能够以列表形式查看布线信息，方便浏览和管理。

**功能描述**:
- 表格展示：以表格形式展示数据列表
- 列配置：支持自定义显示列，调整列顺序
- 排序功能：支持按任意列排序
- 分页功能：支持分页浏览，可自定义每页显示数量
- 批量操作：支持批量编辑、删除、导出
- 行内操作：支持单行编辑、查看详情

**用户体验考虑**:
- 表格样式简洁明了，行高适中，方便阅读
- 支持表格内容的复制和粘贴
- 支持表格列的固定，方便横向滚动时查看关键信息
- 分页控件位于表格底部，方便用户操作

#### 3.4.2 详情视图
**用户故事**: 作为运维工程师，我希望能够查看单条布线记录的详细信息，了解完整的布线情况。

**功能描述**:
- 详细信息：展示单条记录的完整信息
- 编辑功能：支持在详情页直接编辑
- 历史版本：查看记录的修改历史
- 附件展示：展示相关附件和图片
- 关联记录：展示相关的其他布线记录

**用户体验考虑**:
- 详情页布局清晰，信息分组合理
- 支持返回列表页的快捷按钮
- 编辑按钮位置明显，操作方便
- 历史版本对比功能直观，方便查看变更内容

#### 3.4.3 拓扑图展示
**用户故事**: 作为运维工程师，我希望能够以图形化方式查看布线拓扑，直观了解布线情况。

**功能描述**:
- 可视化拓扑：以图形化方式展示布线拓扑
- 交互操作：支持缩放、拖拽、点击查看详情
- 路径高亮：高亮显示选中的布线路径
- 拓扑导出：支持导出拓扑图
- 拓扑打印：支持打印拓扑图

**用户体验考虑**:
- 拓扑图布局自动优化，避免线路交叉过多
- 不同类型的设备和线路有明显的视觉区分
- 支持拓扑图的保存和分享
- 操作提示清晰，降低用户学习成本

#### 3.4.4 统计报表
**用户故事**: 作为技术经理，我希望能够查看统计报表，了解布线情况的整体趋势。

**功能描述**:
- 数据统计：统计各类数据的数量和占比
- 图表展示：以柱状图、饼图、折线图等形式展示
- 趋势分析：展示数据随时间的变化趋势
- 报表导出：支持导出统计报表
- 报表打印：支持打印统计报表

**用户体验考虑**:
- 图表样式美观，数据展示清晰
- 支持图表类型的切换
- 支持查看报表的详细数据
- 支持自定义报表的时间范围

### 3.5 数据管理
#### 3.5.1 数据编辑
**用户故事**: 作为运维工程师，我希望能够在线编辑布线信息，方便修改错误或更新数据。

**功能描述**:
- 在线编辑：支持在线修改数据
- 批量编辑：支持批量修改多条记录
- 字段校验：编辑时进行数据校验
- 保存确认：修改前确认保存
- 修改日志：记录数据的修改历史

**用户体验考虑**:
- 编辑界面与录入界面保持一致，降低学习成本
- 支持撤销编辑操作
- 修改后的数据有明显标记，方便用户确认

#### 3.5.2 数据删除
**用户故事**: 作为运维工程师，我希望能够删除不再需要的布线信息，保持数据的整洁。

**功能描述**:
- 单条删除：删除单条记录
- 批量删除：批量删除多条记录
- 删除确认：删除前进行确认提示
- 回收站：删除的记录进入回收站，可恢复
- 永久删除：从回收站中永久删除记录

**用户体验考虑**:
- 删除确认对话框清晰明了，提示删除的后果
- 回收站功能提供数据恢复的机会，减少误操作的影响
- 永久删除前再次确认，防止误删重要数据

#### 3.5.3 数据导出
**用户故事**: 作为运维工程师，我希望能够将布线信息导出为常用格式，方便离线查看或分享。

**功能描述**:
- 导出格式：支持导出为Excel、PDF、CSV等格式
- 自定义导出：支持选择导出字段
- 批量导出：支持批量导出查询结果
- 导出历史：记录导出历史
- 导出进度：显示导出进度

**用户体验考虑**:
- 导出按钮位置明显，操作方便
- 导出过程中不影响其他操作
- 导出文件命名规范，包含导出时间和内容描述
- 支持设置导出文件的保存路径

#### 3.5.4 版本管理
**用户故事**: 作为运维工程师，我希望能够查看和管理数据的历史版本，了解数据的变更情况。

**功能描述**:
- 版本记录：记录每次修改的版本
- 版本对比：支持对比不同版本的差异
- 版本回滚：支持回滚到历史版本
- 版本备注：支持为版本添加备注

**用户体验考虑**:
- 版本列表清晰显示版本号、修改时间、修改人
- 版本对比界面直观，差异内容有明显标记
- 版本回滚操作简单，有明确的确认提示

### 3.6 用户管理
#### 3.6.1 用户管理
**用户故事**: 作为系统管理员，我希望能够管理系统用户，添加、编辑、删除用户。

**功能描述**:
- 用户列表：展示系统所有用户
- 用户添加：添加新用户，设置用户名、密码、角色
- 用户编辑：修改用户信息，重置密码
- 用户删除：删除用户
- 用户状态管理：启用/禁用用户

**用户体验考虑**:
- 用户列表支持搜索和筛选
- 添加和编辑用户界面简洁明了
- 密码设置有复杂度要求，提示用户设置强密码
- 删除用户前有明确的确认提示

#### 3.6.2 角色管理
**用户故事**: 作为系统管理员，我希望能够管理用户角色，分配不同的权限。

**功能描述**:
- 角色列表：展示系统所有角色
- 角色添加：添加新角色，设置角色名称和权限
- 角色编辑：修改角色名称和权限
- 角色删除：删除角色
- 权限分配：为角色分配不同的权限

**用户体验考虑**:
- 权限分配界面直观，支持批量选择权限
- 角色列表支持搜索和筛选
- 删除角色前有明确的确认提示，提示该角色下的用户情况

#### 3.6.3 操作日志
**用户故事**: 作为系统管理员，我希望能够查看系统操作日志，了解用户的操作行为。

**功能描述**:
- 日志记录：记录用户的操作行为，包括登录、登出、数据录入、修改、删除等
- 日志查询：支持按用户、时间、操作类型等条件查询日志
- 日志导出：支持将日志导出为Excel、PDF、CSV等格式
- 日志分析：分析用户操作行为，生成操作统计报表

**用户体验考虑**:
- 日志列表清晰显示操作时间、操作人、操作类型、操作内容
- 支持日志详情的查看
- 日志查询条件丰富，方便精确查询

### 3.7 智孚系统集成（预留接口）
#### 3.7.1 接口设计
**用户故事**: 作为运维工程师，我希望系统能够与智孚系统集成，自动获取已结单任务单，减少人工操作。

**功能描述**:
- 自动获取任务单：从智孚系统获取已结单的任务单
- 自动识别字段：根据目标字段自动识别任务单中的关键信息
- 自动上传：将识别到的信息自动上传到综合布线登记表系统
- 人工审查：提供审查界面，用户只需审查确认即可

**接口设计**:
- 接口名称: 智孚系统集成接口
- 接口状态: 预留（未实现）
- 接口优先级: 高
- 接口版本: v1.0
- 接口类型: RESTful API
- 认证方式: OAuth 2.0
- 数据格式: JSON
- 触发方式: 定时任务或手动触发

**数据映射**:
| 智孚系统字段 | 综合布线系统字段 |
|--------------|------------------|
| 任务单编号 | IDC需求编号 |
| 客户名称 | 用户单位 |
| 线路信息 | 线路用途、线缆类型 |
| 运营商信息 | 运营商、运营商编号 |
| 执行时间 | 执行日期 |
| 设备位置 | 本端设备位置、对端设备位置 |
| 联系人信息 | 报障联系人 |

**实现计划**:
- 第一阶段: 预留接口，定义数据结构
- 第二阶段: 开发智孚系统对接模块
- 第三阶段: 实现自动识别和上传功能
- 第四阶段: 完善审查和确认流程

## 4. 非功能需求

### 4.1 性能要求
- **响应时间**: 页面加载时间不超过3秒
- **并发支持**: 支持100个并发用户
- **数据处理**: 支持批量处理1000条记录
- **OCR识别速度**: 单张图片识别时间不超过5秒

### 4.2 安全要求
- **数据加密**: 敏感数据（如密码）加密存储
- **传输加密**: 数据传输采用HTTPS加密
- **访问控制**: 严格的权限控制，不同角色有不同的操作权限
- **操作审计**: 完整的操作日志，记录所有用户操作
- **防攻击**: 防止SQL注入、XSS攻击、CSRF攻击等常见安全漏洞
- **数据备份**: 定期自动备份数据，支持数据恢复

### 4.3 可用性要求
- **系统可用性**: 99.9%以上
- **故障恢复**: 故障恢复时间不超过1小时
- **容错能力**: 系统部分功能故障时，不影响其他功能的正常使用
- **错误处理**: 系统出错时，显示友好的错误提示，不暴露系统内部信息

### 4.4 易用性要求
- **界面设计**: 界面简洁明了，操作流程清晰
- **学习成本**: 新用户无需培训即可上手使用
- **操作效率**: 常用操作步骤不超过3步
- **帮助文档**: 提供详细的帮助文档和操作指南
- **反馈机制**: 提供用户反馈渠道，方便用户提出建议和报告问题

### 4.5 可扩展性要求
- **模块化设计**: 系统采用模块化设计，支持功能扩展
- **接口标准**: 采用标准接口设计，支持与其他系统集成
- **数据库设计**: 数据库设计考虑未来数据增长和功能扩展
- **技术选型**: 选择成熟、主流的技术栈，支持社区发展

## 5. 数据需求

### 5.1 数据模型

#### 5.1.1 用户表
| 字段名 | 数据类型 | 描述 |
|--------|----------|------|
| id | String | 用户ID |
| username | String | 用户名 |
| password | String | 密码（加密） |
| name | String | 真实姓名 |
| email | String | 邮箱 |
| phone | String | 手机号 |
| role | String | 角色 |
| status | Boolean | 状态（启用/禁用） |
| createdAt | Date | 创建时间 |
| updatedAt | Date | 更新时间 |

#### 5.1.2 角色表
| 字段名 | 数据类型 | 描述 |
|--------|----------|------|
| id | String | 角色ID |
| name | String | 角色名称 |
| permissions | Array | 权限列表 |
| createdAt | Date | 创建时间 |
| updatedAt | Date | 更新时间 |

#### 5.1.3 布线记录表
| 字段名 | 数据类型 | 描述 |
|--------|----------|------|
| id | String | 记录ID |
| registrationNumber | String | 登记表编号 |
| dataCenter | String | 机房名称 |
| idcRequirementNumber | String | IDC需求编号 |
| yesWorkOrderNumber | String | YES工单编号 |
| customer | String | 用户单位 |
| linePurpose | String | 线路用途 |
| cableType | String | 线缆类型规格 |
| operator | String | 运营商 |
| operatorNumber | String | 运营商编号 |
| executionDate | Date | 执行日期 |
| sourceLocation | Object | 本端设备位置 |
| destinationLocation | Object | 对端设备位置 |
| middleJumperInfo | String | 中间跳接信息 |
| contactPerson | String | 报障联系人 |
| status | String | 线路状态 |
| registrant | String | 登记人 |
| registrationDate | Date | 登记日期 |
| notes | String | 备注信息 |
| attachments | Array | 附件列表 |
| createdAt | Date | 创建时间 |
| updatedAt | Date | 更新时间 |

#### 5.1.4 操作日志表
| 字段名 | 数据类型 | 描述 |
|--------|----------|------|
| id | String | 日志ID |
| userId | String | 用户ID |
| username | String | 用户名 |
| operation | String | 操作类型 |
| content | String | 操作内容 |
| ip | String | 操作IP |
| createdAt | Date | 操作时间 |

### 5.2 数据字典

#### 5.2.1 线路用途
| 代码 | 名称 |
|------|------|
| dedicated | 专线 |
| jumper | 跳线 |
| bareFiber | 裸光纤 |

#### 5.2.2 线缆类型规格
| 代码 | 名称 |
|------|------|
| singleModeFiber | 单模光纤 |
| networkCable | 网线 |

#### 5.2.3 运营商
| 代码 | 名称 |
|------|------|
| chinaUnicom | 联通 |
| chinaTelecom | 电信 |
| chinaMobile | 移动 |
| dci | DCI |
| informationPipeline | 信息管线 |

#### 5.2.4 线路状态
| 代码 | 名称 |
|------|------|
| normal | 正常 |
| fault | 故障 |
| removed | 已拆除 |

## 6. 系统架构

### 6.1 技术栈

#### 6.1.1 前端技术栈
- **框架**: Vue 3
- **语言**: TypeScript
- **UI组件库**: Element Plus
- **图表库**: ECharts
- **路由管理**: Vue Router
- **状态管理**: Pinia
- **HTTP客户端**: Axios

#### 6.1.2 后端技术栈
- **运行环境**: Node.js
- **Web框架**: Express
- **数据库**: MongoDB
- **文件上传**: Multer
- **身份验证**: JWT
- **API文档**: Swagger
- **日志管理**: Winston

#### 6.1.3 文件处理
- **Excel解析**: SheetJS
- **PDF解析**: PDF.js
- **图片OCR**: Tesseract.js
- **文件存储**: 本地存储或云存储

#### 6.1.4 部署方案
- **容器化**: Docker
- **反向代理**: Nginx
- **进程管理**: PM2
- **监控**: Prometheus + Grafana

### 6.2 系统架构图

```
+-------------------+
|   前端应用        |
|  Vue 3 + TypeScript |
+-------------------+
        |
        v
+-------------------+
|   API网关         |
|     Nginx         |
+-------------------+
        |
        v
+-------------------+
|   后端服务        |
|   Node.js + Express |
+-------------------+
        |
        v
+-------------------+
|   数据库          |
|    MongoDB        |
+-------------------+
        |
        v
+-------------------+
|   文件存储        |
|   本地存储/云存储   |
+-------------------+
```

## 7. 界面设计原则

### 7.1 设计风格
- 简洁明了：界面简洁，避免不必要的装饰
- 专业可靠：采用专业的设计风格，增强用户信任感
- 一致性：保持界面元素的一致性，包括颜色、字体、布局等
- 易用性：界面操作简单直观，降低用户学习成本

### 7.2 颜色方案
- 主色调：蓝色（#1890ff），代表专业、可靠
- 辅助色：绿色（#52c41a），代表成功、完成
- 警告色：黄色（#faad14），代表警告、注意
- 错误色：红色（#f5222d），代表错误、危险
- 中性色：灰色系列，用于背景、边框等

### 7.3 字体方案
- 主要字体：Microsoft YaHei，SimHei，Arial
- 标题字体大小：16px-24px
- 正文字体大小：14px
- 辅助文字字体大小：12px

### 7.4 布局原则
- 左侧导航：主要功能菜单
- 顶部导航：用户信息、通知、帮助
- 主内容区：功能模块展示
- 右侧边栏：辅助信息、快捷操作（可选）

## 8. 测试需求

### 8.1 功能测试
- 登录功能测试
- 数据录入功能测试
- 查询检索功能测试
- 数据展示功能测试
- 数据管理功能测试
- 用户管理功能测试

### 8.2 性能测试
- 页面加载时间测试
- 并发用户测试
- 数据处理速度测试
- OCR识别速度测试

### 8.3 安全测试
- 权限测试
- 数据加密测试
- 防攻击测试
- 漏洞扫描测试

### 8.4 兼容性测试
- 浏览器兼容性测试（Chrome、Firefox、Safari、Edge等）
- 操作系统兼容性测试（Windows、macOS、Linux等）
- 移动设备兼容性测试（Android、iOS等）

### 8.5 可用性测试
- 用户体验测试
- 操作流程测试
- 界面易用性测试

## 9. 上线和维护需求

### 9.1 上线准备
- 系统部署：在远程跳板机上部署系统
- 数据迁移：将现有数据迁移到新系统
- 用户培训：对系统用户进行培训
- 上线计划：制定详细的上线计划

### 9.2 系统维护
- 日常维护：定期检查系统运行状态
- 数据备份：定期备份数据库和文件
- 日志分析：定期分析系统日志，发现问题及时处理
- 性能优化：根据系统运行情况，优化系统性能
- 安全更新：及时更新系统补丁，修复安全漏洞

### 9.3 版本更新
- 需求收集：收集用户反馈和新需求
- 版本规划：制定版本更新计划
- 开发测试：开发新功能，进行测试
- 上线发布：发布新版本，通知用户
- 版本迭代：持续优化和改进系统

## 10. 附录

### 10.1 参考文档
- 《综合布线系统工程设计规范》
- 《智孚系统接口文档》（预留）

### 10.2 联系方式
- 项目负责人：[姓名]
- 联系方式：[电话/邮箱]

### 10.3 变更记录
| 变更日期 | 变更内容 | 变更人 |
|----------|----------|--------|
| 2025-12-24 | 初始版本 | 系统自动生成 |

---

**文档审核**

| 审核人 | 日期 | 审核意见 |
|--------|------|----------|
| - | - | - |