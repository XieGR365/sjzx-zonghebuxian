# 综合布线记录管理系统 口头需求 v2.0

## 一、系统概述

### 1.1 系统定位
- **部署方式**: 部署在远程跳板机上的Web应用
- **访问方式**: 通过网络访问网页进行操作
- **核心功能**: 记录和管理各个机房的综合布线信息
- **数据存储**: 所有数据存储在数据库中
- **用户管理**: 支持用户认证、权限管理和操作日志

### 1.2 系统目标
- 实现综合布线信息的数字化管理
- 支持多种格式的文件上传和自动识别
- 提供便捷的数据查询和下载功能
- 预留智孚系统接口，支持后续自动化集成

---

## 二、核心功能模块

### 2.1 数据录入
#### 2.1.1 文件上传
- **支持的文件格式**:
  - Excel表格（.xlsx, .xls）
  - PDF文档（.pdf）
  - 图片格式（.jpg, .png, .jpeg, .bmp）
- **上传方式**:
  - 单文件上传
  - 批量文件上传
  - 拖拽上传

#### 2.1.2 自动识别
- **字段自动识别**: 根据目标字段自动提取并记录数据
- **OCR识别**: 支持图片和PDF的OCR文字识别
- **AI辅助填写**: 利用AI技术辅助填写缺失字段
- **数据验证**: 自动验证数据的完整性和准确性

#### 2.1.3 标准化表单录入
- **表单字段**:
  - 登记表编号（系统自动生成）
  - 机房名称
  - IDC需求编号
  - YES工单编号
  - 用户单位
  - 线路用途（专线/跳线/裸光纤）
  - 线缆类型规格（单模光纤/网线）
  - 运营商（联通/电信/移动/DCI/信息管线）
  - 运营商编号
  - 执行日期
  - 本端设备位置
  - 对端设备位置
  - 中间跳接信息
  - 报障联系人
  - 线路状态（正常/故障/已拆除）
  - 登记人（系统自动填充）
  - 登记日期（系统自动填充）
  - 备注信息
- **必填字段校验**: 确保关键信息完整
- **字段提示**: 提供字段填写说明和示例

### 2.2 查询检索
#### 2.2.1 多维度查询
- **按数据中心查询**: 根据机房名称筛选数据
- **按客户查询**: 根据用户单位筛选数据
- **按电路ID查询**: 根据IDC需求编号或YES工单编号查询
- **按端口查询**: 根据本端或对端端口查询
- **模糊搜索**: 支持关键字模糊匹配
- **组合查询**: 支持多个条件组合查询

#### 2.2.2 高级检索
- **日期范围查询**: 根据执行日期范围筛选
- **运营商筛选**: 根据运营商类型筛选
- **线路状态筛选**: 根据线路状态筛选
- **历史记录查询**: 查询已删除或修改的历史记录

### 2.3 数据展示
#### 2.3.1 列表视图
- **表格展示**: 以表格形式展示数据列表
- **列配置**: 支持自定义显示列
- **排序功能**: 支持按任意列排序
- **分页功能**: 支持分页浏览
- **批量操作**: 支持批量编辑、删除、导出

#### 2.3.2 详情视图
- **详细信息**: 展示单条记录的完整信息
- **编辑功能**: 支持在详情页直接编辑
- **历史版本**: 查看记录的修改历史
- **附件展示**: 展示相关附件和图片

#### 2.3.3 拓扑图展示
- **可视化拓扑**: 以图形化方式展示布线拓扑
- **交互操作**: 支持缩放、拖拽、点击查看详情
- **路径高亮**: 高亮显示选中的布线路径
- **拓扑导出**: 支持导出拓扑图

#### 2.3.4 统计报表
- **数据统计**: 统计各类数据的数量和占比
- **图表展示**: 以柱状图、饼图等形式展示
- **趋势分析**: 展示数据随时间的变化趋势
- **报表导出**: 支持导出统计报表

### 2.4 数据管理
#### 2.4.1 数据编辑
- **在线编辑**: 支持在线修改数据
- **批量编辑**: 支持批量修改多条记录
- **字段校验**: 编辑时进行数据校验
- **保存确认**: 修改前确认保存

#### 2.4.2 数据删除
- **单条删除**: 删除单条记录
- **批量删除**: 批量删除多条记录
- **删除确认**: 删除前进行确认提示
- **回收站**: 删除的记录进入回收站，可恢复

#### 2.4.3 数据导出
- **导出格式**: 支持导出为Excel、PDF、CSV等格式
- **自定义导出**: 支持选择导出字段
- **批量导出**: 支持批量导出查询结果
- **导出历史**: 记录导出历史

#### 2.4.4 版本管理
- **版本记录**: 记录每次修改的版本
- **版本对比**: 支持对比不同版本的差异
- **版本回滚**: 支持回滚到历史版本
- **版本备注**: 支持为版本添加备注

### 2.5 用户管理
#### 2.5.1 用户认证
- **登录功能**: 支持用户名密码登录
- **记住密码**: 支持记住登录状态
- **密码找回**: 支持通过邮箱或手机找回密码
- **多设备登录**: 支持多设备同时登录

#### 2.5.2 权限管理
- **角色管理**: 支持创建和管理用户角色
- **权限分配**: 为角色分配不同的权限
- **用户角色**: 为用户分配角色
- **权限继承**: 支持权限继承机制

#### 2.5.3 操作日志
- **日志记录**: 记录用户的操作行为
- **日志查询**: 支持查询操作日志
- **日志导出**: 支持导出操作日志
- **日志分析**: 分析用户操作行为

---

## 三、技术要求

### 3.1 前端技术栈
- **框架**: Vue 3
- **语言**: TypeScript
- **UI组件库**: Element Plus
- **图表库**: ECharts
- **路由管理**: Vue Router
- **状态管理**: Pinia

### 3.2 后端技术栈
- **运行环境**: Node.js
- **Web框架**: Express
- **数据库**: MongoDB
- **文件上传**: Multer
- **身份验证**: JWT
- **API文档**: Swagger

### 3.3 文件处理
- **Excel解析**: SheetJS
- **PDF解析**: PDF.js
- **图片OCR**: Tesseract.js
- **文件存储**: 本地存储或云存储

### 3.4 部署方案
- **容器化**: Docker
- **反向代理**: Nginx
- **进程管理**: PM2
- **日志管理**: Winston

---

## 四、系统扩展

### 4.1 智孚系统集成（预留接口）
#### 4.1.1 接口标识
```
接口名称: 智孚系统集成接口
接口状态: 预留（未实现）
接口优先级: 高
接口版本: v1.0
```

#### 4.1.2 功能描述
- **自动获取任务单**: 从智孚系统获取已结单的任务单
- **自动识别字段**: 根据目标字段自动识别任务单中的关键信息
- **自动上传**: 将识别到的信息自动上传到综合布线登记表系统
- **人工审查**: 提供审查界面，用户只需审查确认即可

#### 4.1.3 接口设计
- **接口类型**: RESTful API
- **认证方式**: OAuth 2.0
- **数据格式**: JSON
- **触发方式**: 定时任务或手动触发

#### 4.1.4 数据映射
- **任务单编号** → IDC需求编号
- **客户名称** → 用户单位
- **线路信息** → 线路用途、线缆类型
- **运营商信息** → 运营商、运营商编号
- **执行时间** → 执行日期
- **设备位置** → 本端设备位置、对端设备位置
- **联系人信息** → 报障联系人

#### 4.1.5 实现计划
- **第一阶段**: 预留接口，定义数据结构
- **第二阶段**: 开发智孚系统对接模块
- **第三阶段**: 实现自动识别和上传功能
- **第四阶段**: 完善审查和确认流程

### 4.2 其他扩展功能
- **移动端适配**: 支持手机和平板访问
- **消息通知**: 支持邮件、短信通知
- **数据备份**: 定期自动备份数据
- **系统监控**: 监控系统运行状态

---

## 五、非功能需求

### 5.1 性能要求
- **响应时间**: 页面加载时间不超过3秒
- **并发支持**: 支持100个并发用户
- **数据处理**: 支持批量处理1000条记录

### 5.2 安全要求
- **数据加密**: 敏感数据加密存储
- **访问控制**: 严格的权限控制
- **操作审计**: 完整的操作日志
- **防攻击**: 防止SQL注入、XSS攻击

### 5.3 可用性要求
- **系统可用性**: 99.9%以上
- **数据备份**: 每日自动备份
- **故障恢复**: 故障恢复时间不超过1小时

### 5.4 可维护性要求
- **代码规范**: 遵循代码规范
- **文档完善**: 完善的技术文档
- **模块化设计**: 模块化、组件化设计
- **版本控制**: 使用Git进行版本控制

---

## 六、项目里程碑

### 6.1 第一阶段：基础功能开发
- 完成系统架构设计
- 完成数据库设计
- 完成用户管理模块
- 完成数据录入模块

### 6.2 第二阶段：核心功能开发
- 完成查询检索模块
- 完成数据展示模块
- 完成数据管理模块
- 完成文件上传和识别功能

### 6.3 第三阶段：扩展功能开发
- 完成拓扑图展示
- 完成统计报表
- 完成版本管理
- 预留智孚系统接口

### 6.4 第四阶段：测试和部署
- 完成系统测试
- 完成性能优化
- 完成安全加固
- 完成系统部署

---

## 七、备注
- 本需求文档为口头需求的详细记录，后续可能根据实际情况进行调整
- 智孚系统集成功能为预留接口，后续迭代时实现
- 所有功能模块应考虑后续扩展性

---

*需求记录时间：2025-12-24*
*记录人：系统自动生成*
*需求版本：v2.0*